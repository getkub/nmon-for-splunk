<form stylesheet="ui_simple.css,panel_decoration.css">
    <label>NMON Predictive interface, Predictive analysis using the forecasting predict command</label>
    <description></description>

    <fieldset autoRun="false" submitButton="false">

        <input type="time" token="timerange" searchWhenChanged="true">
            <label>Time Range:</label>
            <default>
                <earliestTime>-60d</earliestTime>
                <latestTime>now</latestTime>
            </default>
        </input>

    </fieldset>

    <!-- Information panel -->

    <!-- Information panel -->

    <row>
        <panel>
            <html>

                <div class="imgheader">
                    <img src="../../static/app/nmon/icons/grey_theme/predict.png" alt="Info"/>
                    <h4><a data-toggle="modal" data-target="#Help_modal">Help, information and related links for predictive analysis</a></h4>
                </div>

                <!-- Modal -->
                <div class="modal custom-modal-60 fade" id="Help_modal" tabindex="-1" role="dialog" aria-labelledby="Help_modal_Label">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true"></span></button>
                                <div style="text-align: left;">
                                    <h4 class="modal-title" id="Help_modal_Label">Integrated Navigation:</h4>
                                </div>
                            </div>
                            <div class="modal-body">

                                <div style="text-align: center;">
                                    <img src="../../static/app/nmon/icons/grey_theme/predict.png" alt="predict"/>
                                    <h1>Predictive analysis with the Splunk builtin predict command </h1>
                                </div>

                                <div>
                                    <br />
                                    <br />
                                    The predictive analysis interface implements the builtin Splunk command "predict" to forecast time-series data of different main Nmon monitors such as CPU utilization.
                                    <br />
                                    By default, this interface will use last past 3 months of data to try predicting the next 3 months potential usage of th selected performance metric
                                    <br />
                                    <br />
                                    Get more information of the predict command and its available options, see <a href="http://docs.splunk.com/Documentation/Splunk/latest/SearchReference/Predict" target="_blank">http://docs.splunk.com/Documentation/Splunk/latest/SearchReference/Predict</a>

                                </div>

                            </div>

                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            </div>

                        </div>
                    </div>
                </div>

            </html>
        </panel>
    </row>


    <!-- ################################ -->

    <row>
        <panel id="settings1">
            <title>Host and metric parameters:</title>

            <input type="dropdown" token="timefilter" searchWhenChanged="true">
                <label>Time Filtering:</label>
                <choice value="No_Filter">No Filter (24/24, 7/7)</choice>
                <choice value="Day_BusinessDays_8h-19h">Day Business (08h-19h)</choice>
                <choice value="Day_WeekEnd_8h-19h">Day WE (08h-19h)</choice>
                <choice value="Day_AllDays_8h-19h">Day Week (08h-19h)</choice>
                <choice value="Night_BusinessDays_19h-8h">Night Business (19h-08h)</choice>
                <choice value="Night_WeekEnd_19h-8h">Night WE (19h-08h)</choice>
                <choice value="Night_AllDays_19h-8h">Night All Days (19h-08h)</choice>
                <default>No_Filter</default>
            </input>

            <input type="dropdown" token="osfilter" searchWhenChanged="true">
                <label>Filter OS Type:</label>
                <default>*</default>
                <prefix>OStype="</prefix>
                <suffix>"</suffix>
                <choice value="*">Any OS</choice>
                <choice value="AIX">AIX</choice>
                <choice value="Linux">Linux</choice>
                <choice value="Solaris">Solaris</choice>
                <!-- Enforce unset of token when host choice is done -->
                <change>
                    <unset token="form.frameID"></unset>
                    <unset token="form.hostname"></unset>
                    <unset token="form.OStype_detection"></unset>
                    <unset token="form.holdback_choice"></unset>
                    <unset token="form.futurespan_choice"></unset>
                    <unset token="form.device"></unset>
                    <unset token="is_AIX"></unset>
                    <unset token="is_Linux"></unset>
                    <unset token="is_Solaris"></unset>
                    <unset token="is_detected"></unset>
                </change>
            </input>

            <input type="dropdown" token="frameID" searchWhenChanged="true">
                <label>Frame IDs:</label>
                <!-- Populating Data Model Search -->
                <search>
                    <query>| tstats count AS Count from datamodel=NMON_Data_CPU where (nodename = CPU.CPU_ALL) (CPU.$osfilter$) groupby "CPU.frameID" prestats=true
| stats dedup_splitvals=t count AS Count by "CPU.frameID"
| sort limit=0 "CPU.frameID"
| rename "CPU.frameID" AS frameID
| fields - _span | fillnull Count | fields frameID</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                </search>
                <prefix>frameID="</prefix>
                <suffix>"</suffix>
                <choice value="*">Any</choice>
                <default>*</default>
                <fieldForLabel>frameID</fieldForLabel>
                <fieldForValue>frameID</fieldForValue>
                <!-- Enforce unset of token when host choice is done -->
                <change>
                    <unset token="form.hostname"></unset>
                    <unset token="form.OStype_detection"></unset>
                    <unset token="form.holdback_choice"></unset>
                    <unset token="form.futurespan_choice"></unset>
                    <unset token="form.device"></unset>
                    <unset token="is_AIX"></unset>
                    <unset token="is_Linux"></unset>
                    <unset token="is_Solaris"></unset>
                    <unset token="is_detected"></unset>
                </change>
            </input>

            <input type="text" token="hostname-prefilter" searchWhenChanged="true">
                <label>Optional: Filter hosts populating</label>
                <default>*</default>
            </input>

            <input type="dropdown" token="hostname" searchWhenChanged="true">
                <label>Hosts Selection:</label>
                <!-- Populating Data Model Search -->
                <search>
                    <query>| tstats count AS Count from datamodel=NMON_Data_CPU where (nodename = CPU.CPU_ALL) (CPU.hostname=$hostname-prefilter$) (CPU.$frameID$) (CPU.$osfilter$) groupby "CPU.hostname" prestats=true
| stats dedup_splitvals=t count AS Count by "CPU.hostname"
| sort limit=0 "CPU.hostname"
| fields - _span | fillnull Count | fields "CPU.hostname"
| rename "CPU.hostname" AS hostname</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                </search>
                <prefix>hostname="</prefix>
                <suffix>"</suffix>
                <choice value="*">ALL Hosts</choice>
                <fieldForLabel>hostname</fieldForLabel>
                <fieldForValue>hostname</fieldForValue>
                <!-- Enforce unset of token when host choice is done -->
                <change>
                    <unset token="form.OStype_detection"></unset>
                    <unset token="form.holdback_choice"></unset>
                    <unset token="form.futurespan_choice"></unset>
                    <unset token="form.device"></unset>
                    <unset token="is_AIX"></unset>
                    <unset token="is_Linux"></unset>
                    <unset token="is_Solaris"></unset>
                    <unset token="is_detected"></unset>
                </change>
            </input>

            <input type="dropdown" token="OStype_detection" depends="$hidden_element$" searchWhenChanged="true">
                <label>Detected OS:</label>
                <search>
                    <query>eventtype=nmon:performance type=CPU_ALL $hostname$ OStype=* | head 1 | stats count by OStype | fields OStype | head 1</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                </search>
                <selectFirstChoice>true</selectFirstChoice>
                <fieldForLabel>OStype</fieldForLabel>
                <fieldForValue>OStype</fieldForValue>
                <change>
                    <condition value="AIX">
                        <set token="is_AIX">_time,*</set>
                        <unset token="is_Linux"></unset>
                        <unset token="is_Solaris"></unset>
                        <set token="is_detected">true</set>
                    </condition>
                    <condition value="Linux">
                        <set token="is_Linux">_time,*</set>
                        <unset token="is_AIX"></unset>
                        <unset token="is_Solaris"></unset>
                        <set token="is_detected">true</set>
                    </condition>
                    <condition value="Solaris">
                        <set token="is_Solaris">_time,*</set>
                        <unset token="is_Linux"></unset>
                        <unset token="is_AIX"></unset>
                        <set token="is_detected">true</set>
                    </condition>
                </change>
            </input>

            <input type="dropdown" token="AIX_metric_choice" searchWhenChanged="true" depends="$is_AIX$">
                <label>PERFORMANCE METRIC:</label>
                <choice value="CPU_ALL">CPU_ALL (% cpu usage)</choice>
                <choice value="LPAR_partition">LPAR (partition vCPUs usage)</choice>
                <choice value="LPAR_pool">LPAR (pool vCPUs usage)</choice>
                <choice value="POOLS">POOLS (pool vCPUs usage)</choice>
                <choice value="MEM">MEM (% physical memory usage)</choice>
                <choice value="MEM_SWAP">MEM swap (% virtual memory usage)</choice>
                <choice value="JFSFILE">JFSFILE (% usage per filesystem)</choice>
                <choice value="JFSFILE_ALL">JFSFILE (% global usage filesystem)</choice>
                <change>
                    <condition value="CPU_ALL">
                        <set token="metric">CPU_ALL</set>
                        <set token="no_device">true</set>
                        <unset token="show_device"></unset>
                        <set token="value_field">cpu_load_percent</set>
                        <set token="label_metric">CPU global percent utilization</set>
                        <set token="label">CPU % utilization</set>
                        <set token="datamodel">NMON_Data_CPU</set>
                        <set token="datamodel_nodename">CPU.CPU_ALL</set>
                        <set token="datamodel_prefix">CPU</set>
                    </condition>
                    <condition value="LPAR_partition">
                        <set token="metric">LPAR</set>
                        <set token="no_device">true</set>
                        <unset token="show_device"></unset>
                        <set token="value_field">lpar_vp_usage</set>
                        <set token="label_metric">LPAR vCPUs utilization</set>
                        <set token="label">vCPUs utilization</set>
                        <set token="datamodel">NMON_Data_CPU</set>
                        <set token="datamodel_nodename">CPU.LPAR</set>
                        <set token="datamodel_prefix">CPU</set>
                    </condition>
                    <condition value="LPAR_pool">
                        <set token="metric">LPAR</set>
                        <set token="no_device">true</set>
                        <unset token="show_device"></unset>
                        <set token="value_field">lpar_pool_vp_usage</set>
                        <set token="label_metric">POOL vCPUs utilization</set>
                        <set token="label">vCPUs utilization</set>
                        <set token="datamodel">NMON_Data_CPU</set>
                        <set token="datamodel_nodename">CPU.LPAR</set>
                        <set token="datamodel_prefix">CPU</set>
                    </condition>
                    <condition value="POOLS">
                        <set token="metric">POOLS</set>
                        <set token="no_device">true</set>
                        <unset token="show_device"></unset>
                        <set token="value_field">pool_busy_time</set>
                        <set token="label_metric">POOL vCPUs utilization</set>
                        <set token="label">vCPUs utilization</set>
                        <set token="datamodel">NMON_Data_CPU.POOLS</set>
                        <set token="datamodel_nodename">POOLS</set>
                        <set token="datamodel_prefix">POOLS</set>
                    </condition>
                    <condition value="JFSFILE">
                        <set token="metric">JFSFILE</set>
                        <unset token="no_device"></unset>
                        <set token="show_device">true</set>
                        <set token="value_field">value</set>
                        <set token="label_metric">filesystem global percent utilization</set>
                        <set token="label">FS % utilization</set>
                        <set token="datamodel">NMON_Data_JFS</set>
                        <set token="datamodel_nodename">JFS.JFSFILE</set>
                        <set token="datamodel_prefix">JFS</set>
                    </condition>
                    <condition value="JFSFILE_ALL">
                        <set token="metric">JFSFILE</set>
                        <set token="no_device">true</set>
                        <unset token="show_device"></unset>
                        <set token="value_field">value</set>
                        <set token="label_metric">filesystem global percent utilization</set>
                        <set token="label">FS % utilization</set>
                        <set token="datamodel">NMON_Data_JFS</set>
                        <set token="datamodel_nodename">JFS.JFSFILE</set>
                        <set token="datamodel_prefix">JFS</set>
                    </condition>
                    <condition value="MEM">
                        <set token="metric">MEM</set>
                        <set token="no_device">true</set>
                        <unset token="show_device"></unset>
                        <set token="value_field">mem_used_effective_PCT</set>
                        <set token="label_metric">physical memory percent utilization</set>
                        <set token="label">Phy Mem % utilization</set>
                        <set token="datamodel">NMON_Data_MEM</set>
                        <set token="datamodel_nodename">MEM.AIX</set>
                        <set token="datamodel_prefix">MEM</set>
                    </condition>
                    <condition value="MEM_SWAP">
                        <set token="metric">MEM</set>
                        <set token="no_device">true</set>
                        <unset token="show_device"></unset>
                        <set token="value_field">swap_used_effective_PCT</set>
                        <set token="label_metric">virtual memory percent utilization</set>
                        <set token="label">Virt. Mem % utilization</set>
                        <set token="datamodel">NMON_Data_MEM</set>
                        <set token="datamodel_nodename">MEM.AIX</set>
                        <set token="datamodel_prefix">MEM</set>
                    </condition>
                </change>
            </input>

            <input type="dropdown" token="Linux_metric_choice" searchWhenChanged="true" depends="$is_Linux$">
                <label>PERFORMANCE METRIC:</label>
                <choice value="CPU_ALL">CPU_ALL (% cpu usage)</choice>
                <choice value="MEM">MEM (% physical memory usage)</choice>
                <choice value="MEM_SWAP">MEM swap (% virtual memory usage)</choice>
                <choice value="JFSFILE">JFSFILE (% usage per filesystem)</choice>
                <choice value="JFSFILE_ALL">JFSFILE (% global usage filesystem)</choice>
                <change>
                    <condition value="CPU_ALL">
                        <set token="metric">CPU_ALL</set>
                        <set token="no_device">true</set>
                        <unset token="show_device"></unset>
                        <set token="value_field">cpu_load_percent</set>
                        <set token="label_metric">CPU global percent utilization</set>
                        <set token="label">CPU % utilization</set>
                        <set token="datamodel">NMON_Data_CPU</set>
                        <set token="datamodel_nodename">CPU.CPU_ALL</set>
                        <set token="datamodel_prefix">CPU</set>
                    </condition>
                    <condition value="JFSFILE">
                        <set token="metric">JFSFILE</set>
                        <unset token="no_device"></unset>
                        <set token="show_device">true</set>
                        <set token="value_field">value</set>
                        <set token="label_metric">filesystem global percent utilization</set>
                        <set token="label">FS % utilization</set>
                        <set token="datamodel">NMON_Data_JFS</set>
                        <set token="datamodel_nodename">JFS.JFSFILE</set>
                        <set token="datamodel_prefix">JFS</set>
                    </condition>
                    <condition value="JFSFILE_ALL">
                        <set token="metric">JFSFILE</set>
                        <set token="no_device">true</set>
                        <unset token="show_device"></unset>
                        <set token="value_field">value</set>
                        <set token="label_metric">filesystem global percent utilization</set>
                        <set token="label">FS % utilization</set>
                        <set token="datamodel">NMON_Data_JFS</set>
                        <set token="datamodel_nodename">JFS.JFSFILE</set>
                        <set token="datamodel_prefix">JFS</set>
                    </condition>
                    <condition value="MEM">
                        <set token="metric">MEM</set>
                        <set token="no_device">true</set>
                        <unset token="show_device"></unset>
                        <set token="value_field">mem_used_effective</set>
                        <set token="label_metric">physical memory percent utilization</set>
                        <set token="label">Phy Mem % utilization</set>
                        <set token="datamodel">NMON_Data_MEM</set>
                        <set token="datamodel_nodename">MEM.Linux</set>
                        <set token="datamodel_prefix">MEM</set>
                    </condition>
                    <condition value="MEM_SWAP">
                        <set token="metric">MEM</set>
                        <set token="no_device">true</set>
                        <unset token="show_device"></unset>
                        <set token="value_field">swap_used_effective_PCT</set>
                        <set token="label_metric">virtual memory percent utilization</set>
                        <set token="label">Virt. Mem % utilization</set>
                        <set token="datamodel">NMON_Data_MEM</set>
                        <set token="datamodel_nodename">MEM.Linux</set>
                        <set token="datamodel_prefix">MEM</set>
                    </condition>
                </change>
            </input>

            <input type="dropdown" token="Solaris_metric_choice" searchWhenChanged="true" depends="$is_Solaris$">
                <label>PERFORMANCE METRIC:</label>
                <choice value="CPU_ALL">CPU_ALL (% cpu usage)</choice>
                <choice value="MEM">MEM (% physical memory usage)</choice>
                <choice value="MEM_SWAP">MEM swap (% virtual memory usage)</choice>
                <choice value="JFSFILE">JFSFILE (% usage per filesystem)</choice>
                <choice value="JFSFILE_ALL">JFSFILE (% global usage filesystem)</choice>
                <change>
                    <condition value="CPU_ALL">
                        <set token="metric">CPU_ALL</set>
                        <set token="no_device">true</set>
                        <unset token="show_device"></unset>
                        <set token="value_field">cpu_load_percent</set>
                        <set token="label_metric">CPU global percent utilization</set>
                        <set token="label">CPU % utilization</set>
                        <set token="datamodel">NMON_Data_CPU</set>
                        <set token="datamodel_nodename">CPU.CPU_ALL</set>
                        <set token="datamodel_prefix">CPU</set>
                    </condition>
                    <condition value="JFSFILE">
                        <set token="metric">JFSFILE</set>
                        <unset token="no_device"></unset>
                        <set token="show_device">true</set>
                        <set token="value_field">value</set>
                        <set token="label_metric">filesystem global percent utilization</set>
                        <set token="label">FS % utilization</set>
                        <set token="datamodel">NMON_Data_JFS</set>
                        <set token="datamodel_nodename">JFS.JFSFILE</set>
                        <set token="datamodel_prefix">JFS</set>
                    </condition>
                    <condition value="JFSFILE_ALL">
                        <set token="metric">JFSFILE</set>
                        <set token="no_device">true</set>
                        <unset token="show_device"></unset>
                        <set token="value_field">value</set>
                        <set token="label_metric">filesystem global percent utilization</set>
                        <set token="label">FS % utilization</set>
                        <set token="datamodel">NMON_Data_JFS</set>
                        <set token="datamodel_nodename">JFS.JFSFILE</set>
                        <set token="datamodel_prefix">JFS</set>
                    </condition>
                    <condition value="MEM">
                        <set token="metric">MEM</set>
                        <set token="no_device">true</set>
                        <unset token="show_device"></unset>
                        <set token="value_field">mem_used_effective_PCT</set>
                        <set token="label_metric">physical memory percent utilization</set>
                        <set token="label">Phy Mem % utilization</set>
                        <set token="datamodel">NMON_Data_MEM</set>
                        <set token="datamodel_nodename">MEM.Solaris</set>
                        <set token="datamodel_prefix">MEM</set>
                    </condition>
                    <condition value="MEM_SWAP">
                        <set token="metric">MEM</set>
                        <set token="no_device">true</set>
                        <unset token="show_device"></unset>
                        <set token="value_field">swap_used_effective_PCT</set>
                        <set token="label_metric">virtual memory percent utilization</set>
                        <set token="label">Virt. Mem % utilization</set>
                        <set token="datamodel">NMON_Data_MEM</set>
                        <set token="datamodel_nodename">MEM.Solaris</set>
                        <set token="datamodel_prefix">MEM</set>
                    </condition>
                </change>
            </input>

            <input type="dropdown" token="device" searchWhenChanged="true" depends="$show_device$">
                <label>Device Selection:</label>
                <!-- Populating Data Model Search -->
                <search>
                    <query>| tstats count AS Count from datamodel=$datamodel$ where (nodename = $datamodel_nodename$) ($datamodel_prefix$.hostname=$hostname-prefilter$) ($datamodel_prefix$.$frameID$) ($datamodel_prefix$.$osfilter$) ($datamodel_prefix$.$hostname$) groupby "$datamodel_prefix$.device" prestats=true
| stats dedup_splitvals=t count AS Count by "$datamodel_prefix$.device"
| sort limit=0 "$datamodel_prefix$.device"
| fields - _span | fillnull Count | fields "$datamodel_prefix$.device"
| rename "$datamodel_prefix$.device" AS device</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                </search>
                <prefix>device="</prefix>
                <suffix>"</suffix>
                <fieldForLabel>device</fieldForLabel>
                <fieldForValue>device</fieldForValue>
                <change>
                    <unset token="device_is_choosen"></unset>
                </change>
            </input>

            <html depends="$hostname$" rejects="$is_detected$">
                <p style="color:red;text-align:center;font-size:14px"> - - - - - - - - - - Please wait while identifying the operating system... - - - - - - - - - - </p>
            </html>

            <html rejects="$hostname$">
                <p style="color:red;text-align:center;font-size:14px"> - - - - - - - - - - ACTION REQUIRED: please select a server name in the host selector above - - - - - - - - - - </p>
            </html>

            <html depends="$is_detected$" rejects="$metric$">
                <p style="color:red;text-align:center;font-size:14px"> - - - - - - - - - - ACTION REQUIRED: please select a performance monitor in the selector above - - - - - - - - - - </p>
            </html>

            <html depends="$show_device$" rejects="$device$">
                <p style="color:red;text-align:center;font-size:14px"> - - - - - - - - - - ACTION REQUIRED: please select the associated device to be analysed - - - - - - - - - - </p>
            </html>

        </panel>
    </row>

    <row>
        <panel id="predict1">
            <title>Prediction parameters:</title>

            <input type="dropdown" token="statsmode" searchWhenChanged="true">
                <label>Stats mode:</label>
                <default>perc95</default>
                <choice value="max">Max</choice>
                <choice value="avg">Avg</choice>
                <choice value="min">Min</choice>
                <choice value="perc95">Percentile 95</choice>
                <choice value="median">Median</choice>
                <choice value="mode">Mode</choice>
                <choice value="range">Range</choice>
            </input>

            <input type="dropdown" token="algo">
                <label>Prediction algorithm:</label>
                <choice value="LL">LL (Local Level)</choice>
                <choice value="LLP">LLP (Seasonal local level)</choice>
                <choice value="LLP5">LLP5 (Combines LLT and LLP models)</choice>
                <choice value="LLT">LLT (Local level trend)</choice>
                <default>LLP5</default>
            </input>

            <input type="text" token="interval">
                <prefix>span="</prefix>
                <suffix>"</suffix>
                <default>1d</default>
                <label>Time span value (ex: 1d for 1 day)</label>
            </input>

            <input type="dropdown" token="holdback_choice">
                <label>Holdback:</label>
                <choice value="auto">auto (none)</choice>
                <choice value="custom">custom</choice>
                <default>auto</default>
                <change>
                    <condition value="auto">
                        <unset token="show_holdback"></unset>
                        <set token="holdback">holdback=0</set>
                    </condition>
                    <condition value="custom">
                        <set token="show_holdback">true</set>
                        <unset token="holdback">0</unset>
                    </condition>
                </change>
            </input>
            <input type="text" token="holdback" depends="$show_holdback$">
                <prefix>holdback="</prefix>
                <suffix>"</suffix>
                <label>Nb of last points to ignore</label>
            </input>

            <input type="dropdown" token="futurespan_choice">
                <label>Futurespan:</label>
                <choice value="auto">auto (90)</choice>
                <choice value="custom">custom</choice>
                <default>auto</default>
                <change>
                    <condition value="auto">
                        <unset token="show_futurespan"></unset>
                        <set token="futurespan">future_timespan=90</set>
                    </condition>
                    <condition value="custom">
                        <set token="show_futurespan">true</set>
                        <unset token="futurespan"></unset>
                    </condition>
                </change>
            </input>
            <input type="text" token="futurespan" depends="$show_futurespan$">
                <prefix>future_timespan="</prefix>
                <suffix>"</suffix>
                <label>Nb of time points in future</label>
            </input>

            <input type="dropdown" token="upperlower_choice">
                <label>Upper/Lower:</label>
                <choice value="auto">auto (upper75=high lower75=low)</choice>
                <choice value="custom">custom</choice>
                <default>auto</default>
                <change>
                    <condition value="auto">
                        <unset token="show_upperlower"></unset>
                        <set token="upperlower">upper75=high lower75=low</set>
                    </condition>
                    <condition value="custom">
                        <set token="show_upperlower">true</set>
                        <unset token="upperlower"></unset>
                    </condition>
                </change>
            </input>
            <input type="text" token="upperlower" depends="$show_upperlower$">
                <default></default>
                <label>Enter upper and lower settings:</label>
            </input>

            <html depends="$show_holdback$" rejects="$holdback$">
                <p style="color:red;text-align:center;font-size:14px"> - - - - - - - - - - ACTION REQUIRED: please enter the number of data points from the end that are not to be used, and press Enter - - - - - - - - - - </p>
            </html>

            <html depends="$show_futurespan$" rejects="$futurespan$">
                <p style="color:red;text-align:center;font-size:14px"> - - - - - - - - - - ACTION REQUIRED: please enter the number of data points to be predicted, depending on the interval value this will influence the future prediction (for example with 1d as the interval, 90 means predicting for next 90 days), and press Enter - - - - - - - - - - </p>
            </html>

            <html depends="$show_upperlower$" rejects="$upperlower$">
                <p style="color:red;text-align:center;font-size:14px"> - - - - - - - - - - ACTION REQUIRED: please enter lower and upper settings under the form  "upperXX=high lowerXX=high" and press Enter - - - - - - - - - - </p>
            </html>

        </panel>
    </row>

    <search id="show_hostname">
        <query>| stats count | eval $hostname$ | fields hostname</query>
    </search>

    <row depends="$charting$">
        <panel id="settings3">
            <title>Charting parameters</title>
            <input type="dropdown" token="span" searchWhenChanged="true">
                <label>Span:</label>
                <default>`inline_customspan`</default>
                <choice value="`inline_customspan`">auto</choice>
                <choice value="span=1m">1 minute</choice>
                <choice value="span=2m">2 minutes</choice>
                <choice value="span=3m">3 minutes</choice>
                <choice value="span=4m">4 minutes</choice>
                <choice value="span=5m">5 minutes</choice>
                <choice value="span=10m">10 minutes</choice>
                <choice value="span=15m">15 minutes</choice>
                <choice value="span=30m">30 minutes</choice>
                <choice value="span=1h">1 hour</choice>
                <choice value="span=2h">2 hours</choice>
                <choice value="span=12h">12 hours</choice>
                <choice value="span=4h">4 hours</choice>
                <choice value="span=1d">1 day</choice>
                <choice value="span=2d">2 days</choice>
                <choice value="span=1w">7 days</choice>
                <choice value="span=1mon">1 month</choice>
            </input>
        </panel>
    </row>
    <row rejects="$show_device$">
        <panel>
            <title>$label_metric$</title>
            <single depends="$metric$">
                <search base="show_hostname">
                    <query></query>
                </search>
                <option name="colorBy">value</option>
                <option name="colorMode">none</option>
                <option name="drilldown">all</option>
                <option name="numberPrecision">0</option>
                <option name="rangeColors">["0x65a637","0x6db7c6","0xf7bc38","0xf58f39","0xd93f3c"]</option>
                <option name="rangeValues">[0,30,70,100]</option>
                <option name="showSparkline">1</option>
                <option name="showTrendIndicator">1</option>
                <option name="trendColorInterpretation">standard</option>
                <option name="trendDisplayMode">absolute</option>
                <option name="underLabel">PREDICTIVE ANALYSIS FOR $label_metric$</option>
                <option name="unitPosition">after</option>
                <option name="useColors">0</option>
                <option name="useThousandSeparators">1</option>
            </single>
            <chart>
                <title></title>
                <search>
                    <query>eventtype=nmon:performance type=$metric$ (hostname=$hostname-prefilter$) ($frameID$) ($osfilter$) ($hostname$)
| eval no_device="$no_device$"
| timechart $interval$ $statsmode$($value_field$) AS $value_field$
| predict $value_field$ As predict algorithm=$algo$ $holdback$ $futurespan$ $upperlower$</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                </search>
                <option name="charting.axisTitleX.visibility">visible</option>
                <option name="charting.axisTitleY.visibility">visible</option>
                <option name="charting.axisX.scale">linear</option>
                <option name="charting.axisY.scale">linear</option>
                <option name="charting.chart">line</option>
                <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
                <option name="charting.chart.stackMode">unstacked</option>
                <option name="charting.chart.style">shiny</option>
                <option name="charting.drilldown">all</option>
                <option name="charting.layout.splitSeries">0</option>
                <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
                <option name="charting.legend.placement">bottom</option>
                <option name="charting.chart.nullValueMode">gaps</option>
                <option name="height">680px</option>
                <option name="charting.axisTitleX.text">Time</option>
                <option name="charting.axisTitleY.text">$label$</option>
                <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
                <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
                <option name="charting.axisTitleY2.visibility">visible</option>
                <option name="charting.axisY2.enabled">false</option>
                <option name="charting.axisY2.scale">inherit</option>
            </chart>
        </panel>
    </row>
    <row depends="$show_device$">
        <panel>
            <title>$label_metric$</title>
            <single depends="$metric$">
                <search base="show_hostname">
                    <query></query>
                </search>
                <option name="colorBy">value</option>
                <option name="colorMode">none</option>
                <option name="drilldown">all</option>
                <option name="numberPrecision">0</option>
                <option name="rangeColors">["0x65a637","0x6db7c6","0xf7bc38","0xf58f39","0xd93f3c"]</option>
                <option name="rangeValues">[0,30,70,100]</option>
                <option name="showSparkline">1</option>
                <option name="showTrendIndicator">1</option>
                <option name="trendColorInterpretation">standard</option>
                <option name="trendDisplayMode">absolute</option>
                <option name="underLabel">PREDICTIVE ANALYSIS FOR $label_metric$</option>
                <option name="unitPosition">after</option>
                <option name="useColors">0</option>
                <option name="useThousandSeparators">1</option>
            </single>
            <chart>
                <title></title>
                <search>
                    <query>eventtype=nmon:performance type=$metric$ (hostname=$hostname-prefilter$) ($frameID$) ($osfilter$) ($hostname$) ($device$)
| eval show_device="$show_device$"
| timechart $interval$ $statsmode$($value_field$) AS $value_field$
| predict $value_field$ As predict algorithm=$algo$ $holdback$ $futurespan$ $upperlower$</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                </search>
                <option name="charting.axisTitleX.visibility">visible</option>
                <option name="charting.axisTitleY.visibility">visible</option>
                <option name="charting.axisX.scale">linear</option>
                <option name="charting.axisY.scale">linear</option>
                <option name="charting.chart">line</option>
                <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
                <option name="charting.chart.stackMode">unstacked</option>
                <option name="charting.chart.style">shiny</option>
                <option name="charting.drilldown">all</option>
                <option name="charting.layout.splitSeries">0</option>
                <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
                <option name="charting.legend.placement">bottom</option>
                <option name="charting.chart.nullValueMode">gaps</option>
                <option name="height">680px</option>
                <option name="charting.axisTitleX.text">Time</option>
                <option name="charting.axisTitleY.text">$label$</option>
                <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
                <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
                <option name="charting.axisTitleY2.visibility">visible</option>
                <option name="charting.axisY2.enabled">false</option>
                <option name="charting.axisY2.scale">inherit</option>
            </chart>
        </panel>
    </row>
</form>